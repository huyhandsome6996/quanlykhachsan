<html>
 <head>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  {% extends "base.html" %} {% block title %}Check-out phòng{% endblock %} {% block page_title %} <i class="bi bi-box-arrow-right me-2"></i>Check-out phòng {{ phong.ma_phong }} {% endblock %} {% block head %} 
  <style>
  /* Checkout Container */
  .checkout-container {
    max-width: 700px;
    margin: 0 auto;
  }

  .checkout-card {
    background: white;
    border-radius: 16px;
    padding: 0;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
    border: 2px solid #ef4444;
    overflow: hidden;
  }

  /* Checkout Header */
  .checkout-header {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    padding: 28px 36px;
    color: white;
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .checkout-header-icon {
    width: 56px;
    height: 56px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    flex-shrink: 0;
  }

  .checkout-header-text h4 {
    font-size: 22px;
    font-weight: 700;
    margin: 0 0 4px 0;
  }

  .checkout-header-text p {
    font-size: 14px;
    margin: 0;
    opacity: 0.9;
  }

  /* Body Content */
  .checkout-body {
    padding: 36px;
  }

  /* Room Info */
  .checkout-room-info {
    background: #fef2f2;
    border: 2px solid #fecaca;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 28px;
  }

  .checkout-room-info h6 {
    font-size: 13px;
    font-weight: 700;
    color: #991b1b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .checkout-room-info h6 i {
    font-size: 16px;
  }

  .checkout-room-info p {
    font-size: 20px;
    font-weight: 700;
    color: #dc2626;
    margin: 0;
  }

  /* Form Section */
  .form-section {
    margin-bottom: 28px;
  }

  .form-section label {
    font-size: 14px;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .form-section label i {
    font-size: 16px;
    color: #ef4444;
  }

  /* Number Input */
  .number-input-group {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .number-btn {
    width: 48px;
    height: 48px;
    border: 2px solid #e5e7eb;
    border-radius: 10px;
    background: white;
    color: #6b7280;
    font-size: 20px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .number-btn:hover {
    border-color: #ef4444;
    background: #ef4444;
    color: white;
    transform: scale(1.05);
  }

  .number-btn:active {
    transform: scale(0.95);
  }

  .number-input-wrapper {
    flex: 1;
    position: relative;
  }

  .number-input-wrapper input {
    width: 100%;
    height: 56px;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 0 20px;
    font-size: 24px;
    font-weight: 700;
    color: #1f2937;
    text-align: center;
    transition: all 0.3s ease;
  }

  .number-input-wrapper input:focus {
    outline: none;
    border-color: #ef4444;
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.1);
  }

  .input-unit {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
    font-weight: 600;
    color: #6b7280;
    pointer-events: none;
  }

  /* Price Summary */
  .price-summary {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 28px;
  }

  .price-summary h6 {
    font-size: 14px;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .price-summary h6 i {
    font-size: 16px;
    color: #ef4444;
  }

  .price-row {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #e5e7eb;
  }

  .price-row:last-child {
    border-bottom: none;
    padding-top: 16px;
    margin-top: 8px;
    border-top: 2px solid #e5e7eb;
  }

  .price-label {
    font-size: 14px;
    color: #6b7280;
    font-weight: 500;
  }

  .price-value {
    font-size: 14px;
    color: #1f2937;
    font-weight: 600;
  }

  .price-row:last-child .price-label {
    font-size: 16px;
    color: #1f2937;
    font-weight: 700;
  }

  .price-row:last-child .price-value {
    font-size: 20px;
    color: #ef4444;
    font-weight: 700;
  }

  /* Warning Message */
  .warning-message {
    background: #fef3c7;
    border: 2px solid #fcd34d;
    border-radius: 12px;
    padding: 16px 20px;
    margin-bottom: 28px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .warning-message i {
    font-size: 20px;
    color: #d97706;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .warning-message p {
    font-size: 13px;
    color: #92400e;
    margin: 0;
    line-height: 1.6;
    font-weight: 500;
  }

  /* Confirmation Checkbox */
  .confirmation-checkbox {
    background: #fef2f2;
    border: 2px solid #fecaca;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 28px;
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .confirmation-checkbox input[type="checkbox"] {
    width: 24px;
    height: 24px;
    cursor: pointer;
    accent-color: #ef4444;
    flex-shrink: 0;
  }

  .confirmation-checkbox label {
    font-size: 14px;
    font-weight: 600;
    color: #991b1b;
    margin: 0;
    cursor: pointer;
    line-height: 1.5;
  }

  /* Action Buttons */
  .checkout-actions {
    display: flex;
    gap: 12px;
    padding-top: 24px;
    border-top: 2px solid #f3f4f6;
  }

  .btn-checkout {
    flex: 1;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border: none;
    border-radius: 12px;
    padding: 16px 32px;
    font-size: 16px;
    font-weight: 700;
    color: white;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
  }

  .btn-checkout:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
  }

  .btn-checkout:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .btn-checkout i {
    font-size: 18px;
  }

  .btn-cancel {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px 32px;
    font-size: 16px;
    font-weight: 600;
    color: #6b7280;
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .btn-cancel:hover {
    background: #f9fafb;
    border-color: #d1d5db;
    color: #1f2937;
    transform: translateY(-2px);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .checkout-body {
      padding: 24px;
    }

    .number-input-group {
      flex-direction: row;
    }

    .checkout-actions {
      flex-direction: column;
    }

    .btn-checkout,
    .btn-cancel {
      width: 100%;
      justify-content: center;
    }
  }
</style> {% endblock %} {% block content %} 
  <div class="checkout-container">
   <div class="checkout-card"><!-- Checkout Header -->
    <div class="checkout-header">
     <div class="checkout-header-icon"><i class="bi bi-box-arrow-right"></i>
     </div>
     <div class="checkout-header-text">
      <h4>Check-out khỏi phòng</h4>
      <p>Vui lòng nhập số đêm ở để tính tiền</p>
     </div>
    </div><!-- Body -->
    <div class="checkout-body"><!-- Room Info -->
     <div class="checkout-room-info">
      <h6><i class="bi bi-door-open"></i> Phòng check-out</h6>
      <p>{{ phong.ma_phong }}</p>
     </div><!-- Form -->
     <form method="post" id="checkoutForm">
      {% csrf_token %} <!-- Number of Nights Input -->
      <div class="form-section"><label> <i class="bi bi-moon-stars"></i> Số đêm đã ở </label>
       <div class="number-input-group"><button type="button" class="number-btn" onclick="decreaseNights()"> <i class="bi bi-dash"></i> </button>
        <div class="number-input-wrapper"><input type="number" name="so_dem" id="nightsInput" class="form-control" value="1" min="1" onchange="updatePrice()"> <span class="input-unit">đêm</span>
        </div><button type="button" class="number-btn" onclick="increaseNights()"> <i class="bi bi-plus"></i> </button>
       </div>
      </div><!-- Price Summary (Optional - if you have price info) -->
      <div class="price-summary">
       <h6><i class="bi bi-calculator"></i> Tóm tắt thanh toán</h6>
       <div class="price-row"><span class="price-label">Số đêm:</span> <span class="price-value" id="nightsDisplay">1 đêm</span>
       </div>
       <div class="price-row"><span class="price-label">Giá mỗi đêm:</span> <span class="price-value">Đang tính...</span>
       </div>
       <div class="price-row"><span class="price-label">Tổng tiền phòng:</span> <span class="price-value">Đang tính...</span>
       </div>
      </div><!-- Warning Message -->
      <div class="warning-message"><i class="bi bi-exclamation-triangle-fill"></i>
       <p><strong>Lưu ý:</strong> Sau khi check-out, hệ thống sẽ tính toán tổng chi phí bao gồm tiền phòng và dịch vụ đã sử dụng. Vui lòng kiểm tra kỹ thông tin trước khi xác nhận.</p>
      </div><!-- Confirmation Checkbox -->
      <div class="confirmation-checkbox"><input type="checkbox" id="confirmCheck" onchange="toggleSubmitButton()"> <label for="confirmCheck"> Tôi xác nhận khách hàng đã check-out và đồng ý tiến hành tính tiền thanh toán </label>
      </div><!-- Action Buttons -->
      <div class="checkout-actions"><button type="submit" class="btn-checkout" id="submitBtn" disabled> <i class="bi bi-cash-stack"></i> Xác nhận check-out &amp; tính tiền </button> <a href="{% url 'bao_cao:trang_chu' %}" class="btn-cancel"> <i class="bi bi-x-circle"></i> Hủy bỏ </a>
      </div>
     </form>
    </div>
   </div>
  </div>
  <script>
  function toggleSubmitButton() {
    const checkbox = document.getElementById('confirmCheck');
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = !checkbox.checked;
  }

  function increaseNights() {
    const input = document.getElementById('nightsInput');
    input.value = parseInt(input.value) + 1;
    updatePrice();
  }

  function decreaseNights() {
    const input = document.getElementById('nightsInput');
    if (parseInt(input.value) > 1) {
      input.value = parseInt(input.value) - 1;
      updatePrice();
    }
  }

  function updatePrice() {
    const nights = parseInt(document.getElementById('nightsInput').value);
    const nightsDisplay = document.getElementById('nightsDisplay');
    nightsDisplay.textContent = nights + ' đêm';
  }
</script> {% endblock %}
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b30c6a030441075',t:'MTc2NjU4NjQwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>